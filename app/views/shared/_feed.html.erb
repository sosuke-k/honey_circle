<% if @feed_items.any? %>
  <ol class="microposts">
    <%= render partial: 'shared/feed_item', collection: @feed_items %>
  </ol>
  <%= will_paginate @feed_items %>
<% end %>
<script>
		current_userID = <%= current_user.id %>;

		jQuery.each(['star','interest'], function (i,val) {
			$("form[name=\"toggle_"+val+"\"]")
			// .bind("ajax:loading", function(xhr){alert('loading')})
			.bind("ajax:success", function(data, status, xhr){
				var klass = $('#'+status.micropost_id).children('.responses').children('.'+val+'s');
				var num = klass.children('.'+val+'Info').children('.'+val+'sNum').html();

				if(status.action == 'add'){
					var imgURL = "<%= current_user.image %>"
					var imgDOM = "<a href=/users/"+current_userID+"><img src="+imgURL+" alt='' width='22' /></a> "
					klass.children('.'+val+'Info').append(imgDOM);
					// 数字インクリメント
						klass.children('.'+val+'Info').children('.'+val+'sNum').html(parseInt(num)+1)

						klass.children('form').children('input').addClass('already')

				}else if (status.action == 'remove') {
					klass.find("a[href=\"/users/"+current_userID+"\"]").remove()
					// 数字デクリメント
						klass.children('.'+val+'Info').children('.'+val+'sNum').html(parseInt(num)-1)
						klass.children('form').children('input').removeClass('already')
				};
			})
		});

</script>